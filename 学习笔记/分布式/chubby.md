**Chubby时间通知机制**

基于观察者模式，避免大量客户端轮询chubby服务端。所以客户端可以向服务端注册事件通知。

常见的chubby事件如下：

1. 文件内容变更
2. 节点删除
3. 子节点新增，删除
4. Master服务器转移

**chubby的缓存机制**

为避免客户端频繁访问服务端，在客户端实现缓存，保存文件内容和元数据信息。但是问题是怎么保证缓存的一致性？**租期机制**，每个客户端的缓存都有一个租期，一旦该租期到期，客户端就需要向服务器续租以维持缓存的有效性。当文件数据或是元数据被修改时，服务器首先会阻塞该修改操作，然后Maste向所有可能缓存了该数据的节点发送过期信号。等到Master得到了应答信号以后，再继续之前的修改操作。

