### OSI七层网络模型

1.应用层：应用程序之间的交互来完成特定的网络应用。如，DNS,HTTP,SMTP。应用层交互的数据单元称作报文。

2.表示层

3.会话层

4.传输层：主要负责向两台主机**进程之间**的通信提供数据传输服务。

5.网络层：选择合适的网间路由和交换节点，确保数据的及时传送。把运输层产生的数据报分片传输。

6.链路层：两台主机之间的数据传输，总是在一段一段的链路上传输的，这就需要专门的链路层协议。将网络层的IP数据报组装成帧。

7.物理层：实现相邻计算机节点之间的比特流的透明传输。





### 运输层TCP和UDP的区别

1.TCP(Transmisson Control Protocol ):面向连接的，提供可靠信息传输服务。

​	TCP的特点：

​		TCP是面向连接的。

​		TCP是点对点的协议。

​		TCP提供可靠交付的服务，保证数据按顺序，无差错，不重复，不丢失并且按顺序到达。

​		TCP提供全双工通信。TCP允许通信双方在任何时候都可以发送数据。

​		TCP是面向字节流的。

2.UDP(User Datagram Protocol )：无连接的，尽最大努力交付的数据传输服务。

​	UDP的特点：

​		UDP是无连接的。

​		UDP不保证可靠交付。

​		UDP是面向报文的。

​		UDP没有拥塞控制，因此在网络出现拥塞时，不会出现主机发送率低的情况。对实时应用很有效。

​		UDP支持一对一，一对多，多对一和多对多的情况。

​		UDP首部字节只有8字节，TCP首部有20字节。



### 三次握手和四次挥手

![](D:\mdimage\20180717202520531.png)



![](D:\mdimage\20180717204202563.png)

**为什么连接的时候是三次握手，关闭的时候却是四次握手？** 

因为当Server收到SYN包的时候可以立即返回SYN+ACK包进行相应。但是在关闭连接的时候，Server收到FIN很可能还没准备好关闭Socket。所以此时先返回一个ACK告诉客户端收到了FIN请求报文，当Server传输数据完成之后再发送FIN报文给客户端关闭连接。

**为什么TIME_WAIT状态需要经过2MSL(最大报文段生存时间)才能返回到CLOSE状态？** 

如果server等待了1MSL还没有收到ACK，那么会向Client重新发送FIN报文。

为了保证最后一个ACK可以到达server。假如最后一个ACK报文没有到达Server，也就是server在1个MSL单位内没有收到ACK响应报文。那么Server会向客户端重新发送FIN报文。所以如果客户端等待了2MSL还未收到FIN报文的话，就说明server已经收到了客户端的ACK报文。如果，在2MSL的等待时间范围内，客户端重新收到了FIN报文的话，就会向Server重新发送ACK报文，并再等待2MSL。

### TCP 协议如何保证可靠传输

![](D:\mdimage\微信截图_20200317175425.png)

**校验和：** TCP 将保持它首部和数据的检验和。这是一个端到端的检验和，目的是检测数据在传输过程中的任何变化。如果收到段的检验和有差错，TCP 将丢弃这个报文段和不确认收到此报文段。

**流量控制：** TCP 连接的每一方都有固定大小的缓冲空间，TCP的接收端只允许发送端发送接收端缓冲区能接纳的数据。当接收方来不及处理发送方的数据，就提示发送方降低发送的速率，防止包丢失。TCP 使用的流量控制协议是可变大小的滑动窗口协议。 （TCP 利用滑动窗口实现流量控制） 

**拥塞控制：** 当网络拥塞时，减少数据的发送。 

**停止等待协议** 也是为了实现可靠传输的，它的基本原理就是每发完一个分组就停止发送，等待对方确认。在收到确认后再发下一个分组。 **超时重传：** 当 TCP 发出一个段后，它启动一个定时器，等待目的端确认收到这个报文段。如果不能及时收到一个确认，将重发这个报文段。  



## 在浏览器中输入url地址 ->> 显示主页的过程

总体来说分为以下几个过程:

1. DNS解析
2. TCP连接
3. 发送HTTP请求(IP,OSPF路由协议，ARP协议将IP转为MAC地址)
4. 服务器处理请求并返回HTTP报文
5. 浏览器解析渲染页面
6. 连接结束



## 状态码

 ![](D:\mdimage\aHR0cHM6Ly91c2VyLWdvbGQtY2RuLnhpdHUuaW8vMjAxOC81LzgvMTYzM2UxOWRiYTI3ZWQwMA.jpg)





### HTTP VS HTTPS

HTTP协议采用明文传输数据，存在风险，主要有以下几个风险：

1. 被第三方窃听：（通过加密算法，对传输的数据进行加密）
2. 发送的内容被篡改：（通过数字证书，认证发送方的身份）
3. 冒充风险（数字证书）

